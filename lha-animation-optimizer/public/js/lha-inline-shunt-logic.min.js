(function(){'use strict';const w=window.lhaPreloadedSettings||{},d=w.debugMode===true,j=w.shuntEnableJqueryInterception!==false,g=w.shuntEnableGsapInterception!==false;function l(...e){if(d&&window.console&&typeof console.log==='function'){Array.prototype.unshift.call(e,'LHA Shunt:');console.log.apply(console,e)}}l('Initializing. Debug Mode:',d);l('jQuery Interception Setting:',j);l('GSAP Interception Setting:',g);window.lhaEarlyAnimationQueue=window.lhaEarlyAnimationQueue||[];window.LHA_Originals=window.LHA_Originals||{jquery:{},gsap:{}};l('Global queue and originals store initialized/ensured.');if(window.lhaPlayerScriptUrl){l('Player script URL found:',window.lhaPlayerScriptUrl);try{var p=document.createElement('script');p.src=window.lhaPlayerScriptUrl;p.async=true;p.defer=true;(document.head||document.documentElement).appendChild(p);l('Main player script is being loaded asynchronously.')}catch(e){console.error('LHA Shunt: Critical error - Failed to create or inject player script tag.',e)}}else{console.error('LHA Shunt: Critical error - `lhaPlayerScriptUrl` is not defined. Main player cannot be loaded.')}function wrapJQueryMethods(){if(!j){l('jQuery interception disabled by setting.');return}if(typeof window.jQuery!=='function'||typeof window.jQuery.fn!=='object'||window.jQuery.fn.lhaShuntWrapped){l('jQuery not ready for shunting or already shunted by LHA.');return}l('jQuery interception enabled, attempting to wrap methods.');const m=['animate','fadeIn','fadeOut','slideDown','slideUp','slideToggle','fadeTo','fadeToggle'];m.forEach(function(n){if(typeof window.jQuery.fn[n]==='function'){if(!window.LHA_Originals.jquery[n]){window.LHA_Originals.jquery[n]=window.jQuery.fn[n]}window.jQuery.fn[n]=function(){const e=Array.prototype.slice.call(arguments);l("Shunt: Queuing jQuery call - Method:",n,"Target elements:",(this.length||0),"Args:",e.length?e:'<no args>');window.lhaEarlyAnimationQueue.push({type:'jquery',method:n,target:this,args:e});return this}}else{l("jQuery method not found for wrapping:",n)}});window.jQuery.fn.lhaShuntWrapped=true;l('jQuery animation methods shunted successfully.')}function wrapGSAPMethods(){if(!g){l('GSAP interception disabled by setting.');return}if(typeof window.gsap!=='object'||window.gsap.lhaShuntWrapped){l('GSAP not ready for shunting or already shunted by LHA.');return}l('GSAP interception enabled, attempting to wrap methods.');const m=['to','from','fromTo'];m.forEach(function(n){if(typeof window.gsap[n]==='function'){if(!window.LHA_Originals.gsap[n]){window.LHA_Originals.gsap[n]=window.gsap[n]}window.gsap[n]=function(){const e=Array.prototype.slice.call(arguments);l("Shunt: Queuing GSAP call - Method:",n,"Args:",e.length?e:'<no args>');window.lhaEarlyAnimationQueue.push({type:'gsap',method:n,args:e});return undefined}}else{l("GSAP method not found for wrapping:",n)}});window.gsap.lhaShuntWrapped=true;l('GSAP animation methods shunted successfully.')}try{wrapJQueryMethods()}catch(e){console.error('LHA Shunt: Critical error during jQuery method wrapping setup.',e)}try{wrapGSAPMethods()}catch(e){console.error('LHA Shunt: Critical error during GSAP method wrapping setup.',e)}})();
